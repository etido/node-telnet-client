var ConfigManager = require('zConfig');
//var ConfigManager = require('../lib/ConfigManager.js');
var cm = new ConfigManager('./Config.json');

setInterval(
	function(){
		console.log('Call 1');
		var config = cm.getConfig(function(err,config)
		{
			execute(err,config);
		}
		);
	}
,10000);

cm.onChange(
	function(){
		console.log('Call 2');
		var config = cm.getConfig(function(err,config)
		{
			execute(err,config);
			
		});
	}
);

function execute()
{
	if(err==undefined)
	{
		console.log(JSON.stringify(config));	
		console.log('numberTest:',config.numberTest);
		console.log('stringTest:',config.stringTest);
		console.log('\n');
	}
	else
	{
		console.log(err);
	}
}
